<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Wines</title>

    <link rel="stylesheet" href="style.css">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

</head>
<body>

<!-- USING THE HEADER FRAGMENT FROM FRAGMENTS/HEADER-->
<div th:replace="fragments/header :: header"> </div>


<section class="pt-5 pb-5 mt-0 align-items-center d-flex jumbotron">
    <div class="container" style="background-image: url('https://imagesvc.meredithcorp.io/v3/mm/image?url=https%3A%2F%2Fstatic.onecms.io%2Fwp-content%2Fuploads%2Fsites%2F9%2F2021%2F01%2F12%2Fmore-wine-tariffs-imposed-on-france-and-germany-FT-BLOG0121.jpg'); opacity: 0.9; background-size: cover; height: 40vh;">
        <div class="justify-content-center align-items-center d-flex text-center h-100">
            <div class="col-12 col-md-8  h-50 ">
                <div>
                    <h1 class="display-2  text-light mb-2 mt-5 jumbotron-heading text-light">All wines</h1>
                </div>
            </div>
        </div>
    </div>
</section>

<link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">
<div class="container bootstrap snippets bootdey">
    <section id="portfolio" class="gray-bg padding-top-bottom">

        <div class="container bootstrap snippets bootdey">
            <!--==== Portfolio Filters ====-->
            <div class="categories">

                <ul style="display: inline-block; padding-left: 10%;">

                    <li class="active">
                        <a href="#" data-filter="*">All Categories</a>
                    </li>

                    <div th:each="cat : ${categories}" style="display:inline-block;">
                        <li>
                            <a href="#" th:with="categoryName=${cat.getName()}" th:attr="data-filter='.' + ${cat.getName()}" th:text="${cat.getName()}"></a>
                        </li>
                    </div>

                </ul>
            </div>
        </div>
    </section>
</div>

<br/>


<!-- LISTING ALL WINES -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/material-design-iconic-font/2.2.0/css/material-design-iconic-font.min.css">
<div class="container">
    <div class="row clearfix" th:if="${wines.size() > 0}" th:fragment="list">
        <div th:each="wine : ${wines}" class="col-md-6 col-xl-3 portfolio-item" th:classappend="${wine.getCategory().getName()}">
            <div class="card product_item m-b-30" >
                <div class="card-body row">
                    <div class="cp_img col-6">
                        <img th:src="${wine.getImageUrl()}" alt="Product" class="img-fluid">

                        <div class="hover">
                            <th:block sec:authorize="hasRole('ADMIN')">
                                <a style="display: inline-block;" th:href="@{'/wines/edit-form/{id}' (id=${wine.getId()})}" class="btn btn-secondary btn-sm waves-effect"><i class="zmdi zmdi-edit"></i></a>
                            </th:block>

                            <th:block sec:authorize="hasRole('ADMIN')">
                                <form style="display: inline-block;" th:action="@{'/wines/delete/{id}' (id=${wine.getId()})}" th:method="DELETE">
                                    <button type="submit" onclick="return confirm('Are you sure you want to delete this item?')" class="btn btn-danger btn-sm waves-effect"><i class="zmdi zmdi-delete"></i></button>
                                </form>
                            </th:block>

                            <th:block sec:authorize="hasAnyRole('ADMIN','CUSTOMER')">
                                <form style="display: inline-block;" th:action="@{'/shopping-cart/add-wine/{id}' (id=${wine.getId()})}" th:method="POST">
                                    <button type="submit" class="btn btn-primary btn-sm waves-effect"><i class="zmdi zmdi-shopping-cart"></i></button>
                                </form>
                            </th:block>

                        </div>

                    </div>
                    <div class="product_details">
                        <h5 th:text="${wine.getName()}"></h5>
                        <ul class="product_price list-unstyled">
                            <li class="old_price" th:text="${wine.getPrice()} + ' $'"></li>
                            <li class="old_price" th:text="'Manufacturer: ' + ${wine.getManufacturer().getName()}"></li>
                            <li class="old_price" th:text="'Category: ' + ${wine.getCategory().getName()}"></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="col mb-3">
        <div class="row">
            <div class="col-sm-12 col-md-12">
                <th:block sec:authorize="hasAnyRole('ADMIN','MANUFACTURER')">
                    <a href="/wines/add-form" class="btn btn-block btn-dark">Add new wine</a>
                </th:block>
            </div>
        </div>
    </div>
</div>
<br>
<br>

<!-- USING THE FOOTER FRAGMENT FROM FRAGMENTS/FOOTER-->
<div th:replace="fragments/footer :: footer"> </div>




<script type="text/javascript">
    $(function(){
        $('.categories a').click(function(e){

            $('.categories ul li').removeClass('active');

            $(this).parent('li').addClass('active');

            var itemSelected = $(this).attr('data-filter');
            console.log(itemSelected);

            $('.portfolio-item').each(function(){
                if (itemSelected == '*'){
                    $(this).removeClass('filtered').removeClass('selected');
                    return;
                } else if($(this).is(itemSelected)){
                    $(this).removeClass('filtered').addClass('selected');
                } else{
                    $(this).removeClass('selected').addClass('filtered');
                }
            });
        });
    });
</script>


</body>



</html>